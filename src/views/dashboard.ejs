<%- include('fragments/header') %>

<div class="container my-5">
  <!-- Card de Boas-Vindas -->
  <div class="alert bg-danger alert-dismissible fade show shadow rounded-4" role="alert">
    <div class="d-flex align-items-center">
      <i class="bi bi-person-circle display-5 text-light me-3"></i>
      <div>
        <h2 class="h5 text-light mb-1">Bem-vindo de volta, <%= adminUser.userAdmin %>!</h2>
        <p class="small text-light mb-0">Veja suas opções abaixo:</p>
      </div>
    </div>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>

  <!-- Gráfico de Mensagens -->
  <div class="card shadow-lg border-0 my-4 rounded-4">
    <div class="card-body">
      <h5 class="card-title text-white fw-bold">Gráfico de Mensagens</h5>
      <canvas id="messageChart"></canvas>
    </div>
  </div>

  <!-- Cards de Opções -->
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
    <!-- Card 1: Ordens de Serviço -->
    <div class="col">
      <div class="card shadow-lg border-0 text-center h-100 rounded-4">
        <div class="card-body">
          <i class="bi bi-exclamation-circle-fill display-4 text-warning mb-3"></i>
          <h5 class="card-title text-white fw-bold">Novas mensagens</h5>
          <p class="text-secondary"><%- unreadMessage.length %> pendente</p>
          <a href="/admin/dashboard/unread" class="btn btn-danger rounded-pill px-4">Ver novas mensagens</a>
        </div>
      </div>
    </div>

    <!-- Card 2: Todas as Ordens de Serviço -->
    <div class="col">
      <div class="card shadow-lg border-0 text-center h-100 rounded-4">
        <div class="card-body">
          <i class="bi bi-list-task display-4 text-primary mb-3"></i>
          <h5 class="card-title text-white fw-bold">Todas as mensagens</h5>
          <p class="text-secondary"><%- resultMessage.length %> menssageiro</p>
          <a href="/admin/dashboard/messages" class="btn btn-danger rounded-pill px-4">Ver todas as mensagens</a>
        </div>
      </div>
    </div>

    <!-- Card 3: Editar textos -->
    <div class="col">
      <div class="card shadow-lg border-0 text-center h-100 rounded-4">
        <div class="card-body">
          <i class="bi bi-pencil-square display-4 text-success mb-3"></i>
          <h5 class="card-title text-white fw-bold">Editar página da Web</h5>
          <p class="text-secondary">Gerenciar conteúdo do site</p>
          <a href="/admin/dashboard/editPage" class="btn btn-danger rounded-pill px-4">Editar</a>
        </div>
      </div>
    </div>

    <!-- Card 4: Configurações -->
    <div class="col">
      <div class="card shadow-lg border-0 text-center h-100 rounded-4">
        <div class="card-body">
          <i class="bi bi-gear-fill display-4 text-info mb-3"></i>
          <h5 class="card-title text-white fw-bold">Configurações</h5>
          <p class="text-secondary">Atualizar informações do administrador</p>
          <a href="/admin/dashboard/adminProfile" class="btn btn-danger rounded-pill px-4">Configiração</a>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('fragments/footer') %>

<!-- Script do Gráfico -->
<script>
  const ctx = document.getElementById('messageChart').getContext('2d');
  const messageChart = new Chart(ctx, {
    type: 'bar', // Tipo de gráfico (barra)
    data: {
      labels: ['Recebidas', 'Lidas', 'Não Lidas'],
      datasets: [{
        label: 'Quantidade de Mensagens <%= resultMessage.length %>',
        data: [<%- resultMessage.length %>, <%- resultMessage.length - unreadMessage.length %>, <%- unreadMessage.length %>],
        backgroundColor: [
          'rgba(75, 192, 192, 0.4)', // Azul para mensagens recebidas
          'rgba(54, 162, 235, 0.4)',  // Verde para mensagens lidas
          'rgba(255, 206, 86, 0.4)'  // Amarelo para mensagens não lidas
        ],
        borderColor: [
          'rgba(75, 192, 192, 1)',
          'rgba(54, 162, 235, 1)',
          'rgba(255, 206, 86, 1)'
        ],
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
</script>